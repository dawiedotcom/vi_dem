#!/bin/bash

#TIMESTEPS='3e-6 0.00001 0.00003 0.0001 0.0003 0.001' # 0.00005' # 0.0001 0.00001 0.000001'

TIMESTEPS="7.2360125455826764e-06 1.628102822756102e-05 2.5326043909539363e-05 3.4371059591517715e-05 4.3416075273496053e-05 4.3416075273496053e-05 5.467209478884689e-05 6.592811430419772e-05 7.718413381954854e-05 8.844015333489938e-05 9.96961728502502e-05 0.00011095219236560103 0.00012220821188095186 0.00013346423139630272 0.00014472025091165353 0.00014472025091165353 0.00019042138277849152 0.00023612251464532946 0.00028182364651216737 0.00032752477837900534 0.00037322591024584336 0.00041892704211268127 0.0004646281739795192 0.0005103293058463572 0.0005560304377131951 0.000601731569580033 0.0006474327014468712 0.000693133833313709 0.000738834965180547 0.000784536097047385 0.0008302372289142229 0.0008759383607810608 0.0009216394926478987"

GAMMAS='0'
LMPS=lmp

for TIMESTEP in $TIMESTEPS
do
    for GAMMA_N in $GAMMAS
    do
        if [ ! -d dump ]; then
            mkdir dump
        fi

        FBASENAME=${TIMESTEP}_${GAMMA_N}
        ${LMPS} -in impact_analytic.lammps -var TIMESTEP $TIMESTEP -var GAMMA_N $GAMMA_N
        ./extract_thermo.awk dump/log_$FBASENAME.log > dump/impact_$FBASENAME.thermo
        ./extract_atom_one.awk dump/lammps_$FBASENAME.dump > dump/atom_one_$FBASENAME.dump
    done
done
